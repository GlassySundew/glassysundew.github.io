System.register("chunks:///_virtual/BaseCdbSheet.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"65467P0caJJm55CQaGohZGY","BaseCdbSheet",void 0);var n=e("StringValueWrapper",function(){function e(e){this.value=e}var t=e.prototype;return t.toString=function(){return this.value},t.parseJson=function(){return JSON.parse(this.value)},t.parseNumber=function(){return Number(this.value)},e}());e("BaseCdbSheet",function(){function e(e,t){this.dataById=void 0,this.dataByIndex=void 0,this.columns=void 0,this.sheets=void 0,this.sheetName=void 0,this.dataById=new Map(Object.entries(e.byId.h)),this.dataByIndex=e.byIndex,this.columns=e.sheet.columns,this.sheets=t,this.sheetName=e.name}var t=e.prototype;return t.getColumnType=function(e){var t;return null==(t=this.columns.find((function(t){return t.name===e})))?void 0:t.type},t.getById=function(e){var t=this.dataById.get(e);if(t)return this.proxyWrapper(t,this.columns,this.sheetName)},t.getByIndex=function(e){return this.proxyWrapper(this.dataByIndex[e],this.columns,this.sheetName)},t.getAll=function(){return this.proxyWrapper(this.dataByIndex,this.columns,this.sheetName)},t.proxyWrapper=function(e,t,r){var i=this;return Array.isArray(e)?e.map((function(e){return i.proxyWrapper(e,t,r)})):e&&"object"==typeof e?(e.__proxy__||(e.__proxy__=new Proxy(e,{get:function(e,s){if("__proxy__"===s||"symbol"==typeof s)return e[s];if(e[s]&&e[s].__proxy__)return e[s].__proxy__;if("string"==typeof s&&void 0!==e[s]){if("value"===s&&"string"==typeof e[s])return new n(e[s]);var o=t.find((function(e){return e.name===s})),u=null==o?void 0:o.type;if(null!=u&&u.sheet&&"string"==typeof e[s]){var a,p,h=i.sheets[u.sheet].getById(e[s]),y=null==(a=i.sheets)?void 0:a[u.sheet],c=null!=(p=null==y?void 0:y.columns)?p:[];return i.proxyWrapper(h,c,u.sheet)}if("object"==typeof e[s]&&null!==e[s]){var l,d,f=r+"@"+s,_=null==(l=i.sheets)?void 0:l[f],v=null!=(d=null==_?void 0:_.columns)?d:Object.entries(e[s]).map((function(e){var t=e[0];e[1];return{name:t,type:{_hx_name:void 0,_hx_index:-1,__enum__:"cdb.ColumnType"}}}));return i.proxyWrapper(e[s],v,f)}}return e[s]}})),e.__proxy__):e},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/Blast.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8afa9nk2Z9O3p0zobsJmRoS","Blast",void 0);e("BlastGroupKeyId",function(e){return e.YELLOW="yellow",e.RED="red",e.GREEN="green",e.PINK="pink",e.BLUE="blue",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BlastBoardView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Blast.ts"],(function(e){var t,i,r,n,o,l,a,c,s,u,h,p,d,f,w,b,y,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.asyncToGenerator,l=e.regeneratorRuntime,a=e.createForOfIteratorHelperLoose},function(e){c=e.cclegacy,s=e._decorator,u=e.Node,h=e.Prefab,p=e.UITransform,d=e.Vec3,f=e.Vec2,w=e.tween,b=e.instantiate,y=e.Component},function(e){m=e.BlastGroupKeyId}],execute:function(){var v,g,P,T,x,z,L,R,S,_,F,A,B,Y,k,N,I,U,C,G;c._RF.push({},"0bdacUGU+9JZ59KCgmHoZwg","BlastBoardView",void 0);var D=s.ccclass,O=s.property;s.requireComponent,e("BlastBoardView",(v=D("BlastBoardView"),g=O({visible:!0}),P=O({visible:!0}),T=O(u),x=O(h),z=O(h),L=O(h),R=O(h),S=O(h),v(((G=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"cellSize",A,n(t)),r(t,"cellSpacing",B,n(t)),r(t,"boardRoot",Y,n(t)),r(t,"redPiece",k,n(t)),r(t,"pinkPiece",N,n(t)),r(t,"bluePiece",I,n(t)),r(t,"greenPiece",U,n(t)),r(t,"yellowPiece",C,n(t)),t.width=0,t.height=0,t.cells=[],t}i(t,e);var c=t.prototype;return c.refill=function(){var e=o(l().mark((function e(t,i){var r,n,o,c,s,h,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=a(t);!(n=r()).done;)o=n.value,c=o.fromX,s=o.toY,(h=new u("c_"+c+"_"+s)).setPosition(this.cellToWorld(c,o.fromY)),this.boardRoot.addChild(h),this.cells[s*this.width+c]={node:h,piece:null},this.setPiece(c,s,i[s*this.width+c].piece),p=this.cellToWorld(o.fromX,o.toY),this.dropNode(h,o.fromY-o.toY,p);case 1:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}(),c.initGrid=function(){var e=o(l().mark((function e(t,i,r){var n,o,c,s,h,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.width=t,this.height=i,this.boardRoot.removeAllChildren(),this.cells=new Array(t*i),n=0;n<i;n++)for(o=0;o<t;o++)(c=new u("c_"+o+"_"+n)).setPosition(this.cellToWorld(o,n)),this.boardRoot.addChild(c),this.cells[n*this.width+o]={node:c,piece:null};for(s=a(r);!(h=s()).done;)p=h.value,this.setPiece(p.x,p.y,p.piece);case 6:case"end":return e.stop()}}),e,this)})));return function(t,i,r){return e.apply(this,arguments)}}(),c.clear=function(){var e=o(l().mark((function e(t){var i,r,n,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=a(t);!(r=i()).done;)o=r.value,c=o.y*this.width+o.x,null==(n=this.cells[c].node)||n.removeFromParent(),this.cells[c].node=null,this.cells[c].piece=null;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.dropGravity=function(){var e=o(l().mark((function e(t){var i,r,n,o,c,s,u,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],r=a(t);case 2:if((n=r()).done){e.next=15;break}if(o=n.value,c=this.cells[o.fromY*this.width+o.fromX],s=c.node){e.next=8;break}return e.abrupt("continue",13);case 8:u=this.cellToWorld(o.fromX,o.toY),h=this.dropNode(s,o.fromY-o.toY,u),i.push(h),this.cells[o.fromY*this.width+o.fromX].node=null,this.cells[o.toY*this.width+o.fromX].node=s;case 13:e.next=2;break;case 15:return e.next=17,Promise.all(i);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.worldToGridPosition=function(e,t){var i=this.boardRoot.getComponent(p).convertToNodeSpaceAR(new d(e,t,0));return this.localToGridPosition(new f(i.x,i.y))},c.isCoordinateValid=function(e){return e.x>=0&&e.y>=0&&e.x<this.width&&e.y<this.height},c.dropNode=function(e,i,r){return new Promise((function(n){w(e).to(t.FALL_DURATION_OFFSET+t.FALL_DURATION_MULT*i,{position:r},{easing:"quadIn"}).call((function(e){return n()})).start()}))},c.setPiece=function(e,t,i){var r=this.cells[t*this.width+e];if(i){var n=this.prefabForType(i.type.id),o=b(n);r.node.addChild(o),r.piece=i}},c.prefabForType=function(e){switch(e){case m.BLUE:return this.bluePiece;case m.GREEN:return this.greenPiece;case m.PINK:return this.pinkPiece;case m.RED:return this.redPiece;case m.YELLOW:default:return this.yellowPiece}},c.localToGridPosition=function(e){var t=this.cellSize.x+this.cellSpacing.x,i=this.cellSize.y+this.cellSpacing.y,r=.5*t*this.width,n=.5*i*this.height,o=e.x+r,l=e.y+n,a=Math.floor(o/t),c=Math.floor(l/i);return new f(a,c)},c.cellToWorld=function(e,t){var i=this.cellSize.x+this.cellSpacing.x,r=this.cellSize.y+this.cellSpacing.y,n=i*(.5+e),o=r*(.5+t),l=.5*i*this.width,a=.5*r*this.height;return new d(n-l,o-a)},t}(y)).FALL_DURATION_OFFSET=.15,G.FALL_DURATION_MULT=.05,A=t((F=G).prototype,"cellSize",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f(200,200)}}),B=t(F.prototype,"cellSpacing",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f(10,10)}}),Y=t(F.prototype,"boardRoot",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(F.prototype,"redPiece",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(F.prototype,"pinkPiece",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(F.prototype,"bluePiece",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(F.prototype,"greenPiece",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(F.prototype,"yellowPiece",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=F))||_));c._RF.pop()}}}));

System.register("chunks:///_virtual/Bootstrap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Game.ts","./BlastBoardView.ts","./StatsView.ts","./ViewFacade.ts","./CdbAdapter.ts"],(function(t){var e,r,n,i,a,o,s,c,u,l,p,d,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,u=t.Component},function(t){l=t.Game},function(t){p=t.BlastBoardView},function(t){d=t.StatsView},function(t){f=t.ViewFacade},function(t){h=t.CdbAdapter}],execute:function(){var b,w,y,v,g,m,B;s._RF.push({},"697e7+1lgVDIbAUHxq16Sd5","Bootstrap",void 0);var V=c.ccclass,D=c.property;t("Bootstrap",(b=V("Bootstrap"),w=D(p),y=D(d),b((m=e((g=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"boardView",m,i(e)),n(e,"hud",B,i(e)),e.game=void 0,e.ready=void 0,e.cdbData=void 0,e}r(e,t);var s=e.prototype;return s.onLoad=function(){this.ready=this.init()},s.init=function(){var t=a(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new h).init();case 2:return this.cdbData=t.sent,e=new f(this.boardView,this.hud),this.game=new l(this.cdbData.gameLevels.getById("one"),e),t.abrupt("return",this.game);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(u)).prototype,"boardView",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(g.prototype,"hud",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=g))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/CdbAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main.mjs_cjs=&original=.js","./CdbData.ts","./main.js"],(function(n){var t,r,e,u,c;return{setters:[function(n){t=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){e=n.cclegacy},null,function(n){u=n.CdbData},function(n){c=n.default}],execute:function(){e._RF.push({},"7f3621BmfNADoozmOcLHqCE","CdbAdapter",void 0);n("CdbAdapter",function(){function n(){}return n.prototype.init=function(){var n=t(r().mark((function n(){var t,e;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.run();case 3:return t=n.sent,e=new u(t),n.abrupt("return",e);case 8:throw n.prev=8,n.t0=n.catch(0),"an error occured while parsing cdb: "+n.t0;case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}(),n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/CdbData.ts",["cc","./BaseCdbSheet.ts","./Typings.ts"],(function(t){var e,s,i;return{setters:[function(t){e=t.cclegacy},function(t){s=t.BaseCdbSheet},function(t){i=t.SheetConstructors}],execute:function(){e._RF.push({},"c47faNbOwNMJIULzS2hl7vE","CdbData",void 0);t("CdbData",(function(t){for(var e in this.sheets={},i){var n=i[e];if(!t[e])throw new Error("pre-defined sheet "+e+" is not found in cdb!");var h=new n(t[e],this.sheets);this[e]=this.sheets[e]=h}for(var r in t)if(r.includes("@")&&!this.sheets[r]){var a=new s(t[r],this.sheets);this[r]=this.sheets[r]=a}}));e._RF.pop()}}}));

System.register("chunks:///_virtual/Cell.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"d32f3oc38NBaadCo84ss8An","Cell",void 0);i("Cell",(function(i,t,e){this.x=void 0,this.y=void 0,this.piece=void 0,this.x=i,this.y=t,this.piece=e}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Contract.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"9dfffUuL2NMML1CI9jrCMCq","Contract",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/DefeatState.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"faabc9XzYZKkaCiVLVeDWKa","DefeatState",void 0);t("DefeatState",function(){function t(t){this.ctx=t}var r=t.prototype;return r.enter=function(){var t=e(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null==(e=(r=this.ctx.view).showDefeat)?void 0:e.call(r);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.handleTap=function(t){},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/FloodFillGroupFinder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,o;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"b02b42hP11BOYJ6rX6R3ABQ","FloodFillGroupFinder",void 0);e("FloodFillGroupFinder",function(){function e(){this.dirs=[[1,0],[-1,0],[0,1],[0,-1]]}return e.prototype.find=function(e,o){var t,i=null==(t=o.piece)?void 0:t.type;if(void 0===i)return[];for(var n=new Set([o]),l=[o];l.length;)for(var u,c=l.pop(),p=r(this.dirs);!(u=p()).done;){var d=u.value,s=d[0],a=d[1],f=c.x+s,F=c.y+a;if(!(f<0||f>=e.width||F<0||F>=e.height)){var h=e.getCell(f,F);n.has(h)||h.piece&&h.piece.type===i&&(n.add(h),l.push(h))}}return[].concat(n)},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameContext.ts","./ReadyState.ts","./GameProgress.ts","./GravityResolver.ts","./GridFactory.ts","./IdService.ts","./PieceFactory.ts","./RandomService.ts","./RefillService.ts"],(function(t){var e,n,r,i,s,a,c,o,u,l,f,d;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){r=t.cclegacy},function(t){i=t.GameContext},function(t){s=t.ReadyState},function(t){a=t.GameProgress},function(t){c=t.GravityResolver},function(t){o=t.GridFactory},function(t){u=t.SimpleIdFactory},function(t){l=t.PieceFactory},function(t){f=t.RandomService},function(t){d=t.RefillService}],execute:function(){r._RF.push({},"8ed5elkx3VP8bVUGpmsw8Py","Game",void 0);t("Game",function(){function t(t,e){this.grid=void 0,this.ctx=void 0,this.state=void 0;var n=new u,r=new l(n),h=new o(r),v=new c,p=new f(t),y=new d;this.grid=h.create(t,p),this.ctx=new i(t,this.grid,e,p,v,y,n,new a(0,t.rules.maxMoves,t.rules.targetScore),this.setState.bind(this)),this.setState(new s(this.ctx))}var r=t.prototype;return r.tap=function(t){var e,n,r=this.ctx.grid.getCell(t.x,t.y);null==(e=(n=this.state).handleTap)||e.call(n,r)},r.setState=function(){var t=e(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state=e,!this.state.enter){t.next=4;break}return t.next=4,this.state.enter();case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/GameContext.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8bdfeSbWOBDN7POdgVMeF1+","GameContext",void 0);t("GameContext",(function(t,e,i,s,n,r,c,h,o){this.cfg=t,this.grid=e,this.view=i,this.rng=s,this.gravity=n,this.refill=r,this.idFactory=c,this.progress=h,this.setState=o}));e._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Bootstrap.ts","./BlastBoardView.ts"],(function(t){var e,o,n,i,r,s,a,c,l,u,h,p,d,T,g,E,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,c=t._decorator,l=t.input,u=t.Input,h=t.Node,p=t.view,d=t.game,T=t.log,g=t.Component},function(t){E=t.Bootstrap},function(t){v=t.BlastBoardView}],execute:function(){var f,y,m,C,w,U,_,b;a._RF.push({},"1e973lUqN1PRqot2KrTMQoQ","GameController",void 0);var P=c.ccclass,D=c.property,O=c.requireComponent;t("GameController",(f=P("GameController"),y=O(v),m=D(v),C=D(E),f(w=y((_=e((U=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"gridView",_,i(e)),n(e,"bootstrap",b,i(e)),e.game=void 0,e}o(e,t);var a=e.prototype;return a.start=function(){var t=r(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bootstrap.ready;case 2:return this.game=this.bootstrap.game,e=this.game.grid,t.next=6,this.gridView.initGrid(e.width,e.height,e.cells);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.onEnable=function(){l.on(u.EventType.TOUCH_END,this.onTouchEnd,this),l.on(u.EventType.TOUCH_START,this.onTouchEnd,this),l.on(u.EventType.TOUCH_CANCEL,this.onTouchEnd,this),l.on(u.EventType.MOUSE_UP,this.onTouchEnd,this),this.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(h.EventType.MOUSE_UP,this.onTouchEnd,this),console.log("ready",{dpr:null==p.getDevicePixelRatio?void 0:p.getDevicePixelRatio(),frameSize:null==p.getFrameSize?void 0:p.getFrameSize(),started:!1===d.isPaused()}),console.log("input singleton",l)},a.onDestroy=function(){l.off(u.EventType.TOUCH_END,this.onTouchEnd,this),l.off(u.EventType.MOUSE_UP,this.onTouchEnd,this)},a.onTouchEnd=function(t){T("tuoching!");var e=t.getUILocation(),o=this.gridView.worldToGridPosition(e.x,e.y);this.gridView.isCoordinateValid(o)&&this.game.tap(o)},e}(g)).prototype,"gridView",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(U.prototype,"bootstrap",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=U))||w)||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameProgress.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s;return{setters:[function(e){t=e.createClass},function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"54b02FVB+1LbLtMwjjBeqAd","GameProgress",void 0);e("GameProgress",function(){function e(e,t,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===s&&(s=0),this.score=e,this.movesLeft=t,this.targetScore=s}var s=e.prototype;return s.addScore=function(e){return this.score+=e,this.score},s.consumeTurn=function(){return this.movesLeft>0&&this.movesLeft--,this.movesLeft},t(e,[{key:"hasWon",get:function(){return this.score>=this.targetScore}},{key:"outOfMoves",get:function(){return this.movesLeft<=0}}]),e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/GravityResolver.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"50078qyVKFAb5dgZWHiDRFp","GravityResolver",void 0);e("GravityResolver",function(){function e(){}return e.prototype.applyGravity=function(e){for(var r=[],t=0;t<e.width;t++)for(var i=0,c=0;c<e.height;c++){var o=e.getCell(t,c);if(o.piece){if(c!==i){var n=e.getCell(t,i);r.push({id:o.piece.id,fromX:t,fromY:c,toY:i}),n.piece=o.piece,o.piece=null}i++}}return r},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Grid.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"f9ff8ZkgG9Kf6FUJwcp6PDE","Grid",void 0);t("Grid",function(){function t(t,i,e){this.width=void 0,this.height=void 0,this.cells=void 0,this.width=t,this.height=i,this.cells=e}return t.prototype.getCell=function(t,i){return this.cells[i*this.width+t]},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/GridFactory.ts",["cc","./Grid.ts","./Cell.ts"],(function(t){var r,e,i;return{setters:[function(t){r=t.cclegacy},function(t){e=t.Grid},function(t){i=t.Cell}],execute:function(){r._RF.push({},"9a76frPZQdAKpPfl22Iv4x5","GridFactory",void 0);t("GridFactory",function(){function t(t){this.pieceFactory=void 0,this.pieceFactory=t}return t.prototype.create=function(t,r){for(var c=t.blast.gridSize.y,n=t.blast.gridSize.x,o=[],a=0;a<c;a++)for(var u=0;u<n;u++){var s=r.next(),f=this.pieceFactory.create(s);o[a*n+u]=new i(u,a,f)}return new e(n,c,o)},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/IdService.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a3e55yBLW1BC4bdZH5dT7oU","IdService",void 0);t("SimpleIdFactory",function(){function t(){this.n=0}return t.prototype.newId=function(){return"p_"+this.n++},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Levels.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8cd02fzcFtEZr4mKJktNU5x","Levels",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Bootstrap.ts","./Contract.ts","./Game.ts","./GameContext.ts","./Grid.ts","./Cell.ts","./Piece.ts","./DefeatState.ts","./ReadyState.ts","./TilesFallingState.ts","./VictoryState.ts","./FloodFillGroupFinder.ts","./GameProgress.ts","./GravityResolver.ts","./GridFactory.ts","./IdService.ts","./PieceFactory.ts","./RandomService.ts","./RefillService.ts","./GameController.ts","./ViewFacade.ts","./BlastBoardView.ts","./StatsView.ts","./BaseCdbSheet.ts","./CdbAdapter.ts","./CdbData.ts","./main.mjs_cjs=&original=.js","./Typings.ts","./Blast.ts","./Levels.ts","./Random.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.js",["./cjs-loader.mjs"],(function(e,n){var t;return{setters:[function(e){t=e.default}],execute:function(){function r(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}e("default",void 0);var a=e("__cjsMetaURL",n.meta.url);t.define(a,(function(n,t,l,a,i){l.exports={run:function(){var e,n,t=new Promise((function(t,r){e=t,n=r}));return function(t){var l,a=function(){return k.__string_rec(this,"")},i=i||{};function o(e,n){var t=Object.create(e);for(var r in n)t[r]=n[r];return n.toString!==Object.prototype.toString&&(t.toString=n.toString),t}var s=function(){};s.__name__="Data",s.applyLang=function(e,n,t){var r=new y(s.root);return null!=t&&(r.onMissing=t),r.apply(e,n)},s.load=function(e,n){null==n&&(n=!1);for(var t=0,l=(s.root=T.parse(e,!1)).sheets;t<l.length;){var a=l[t];++t,null!=a.lines&&0==a.lines.length&&(a.lines=x.getSheetLines(s.root.sheets,a))}for(var i,o=r(s.root.sheets);!(i=o()).done;){var u=i.value;n&&null!=s[u.name]?s[u.name].reload(s.root):s[u.name]=new w(s.root,u.name)}};var u=function(e,n){this.r=new RegExp(e,n.split("u").join(""))};u.__name__="EReg",u.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m},__class__:u};var _=function(){};_.__name__="HxOverrides",_.cca=function(e,n){var t=e.charCodeAt(n);if(t==t)return t},_.substr=function(e,n,t){if(null==t)t=e.length;else if(t<0){if(0!=n)return"";t=e.length+t}return e.substr(n,t)},_.remove=function(e,n){var t=e.indexOf(n);return-1!=t&&(e.splice(t,1),!0)},_.now=function(){return Date.now()};var h=function(){};h.__name__="Main",h.main=function(){cc.resources.load("cdb/res/data",(function(t,r){if(t)return console.error("Failed to load data.cdb:",t),void n();var l=r._file;s.load(l),e(s)}))},Math.__name__="Math";var f=function(){};f.__name__="Reflect",f.field=function(e,n){try{return e[n]}catch(e){return null}},f.fields=function(e){var n=[];if(null!=e){var t=Object.prototype.hasOwnProperty;for(var r in e)"__id__"!=r&&"hx__closures__"!=r&&t.call(e,r)&&n.push(r)}return n},f.deleteField=function(e,n){return!!Object.prototype.hasOwnProperty.call(e,n)&&(delete e[n],!0)},f.copy=function(e){if(null==e)return null;for(var n={},t=0,r=f.fields(e);t<r.length;){var l=r[t];++t,n[l]=f.field(e,l)}return n};var c=function(){};c.__name__="Std",c.string=function(e){return k.__string_rec(e,"")},c.parseInt=function(e){var n=parseInt(e);return isNaN(n)?null:n};var m=function(){};m.__name__="StringTools",m.htmlEscape=function(e,n){for(var t="",r=0,l=e;r<l.length;){var a=r++,i=(e=l).charCodeAt(a);i>=55296&&i<=56319&&(i=i-55232<<10|1023&e.charCodeAt(a+1));i>=65536&&++r;var o=i;switch(o){case 34:t+=n?"&quot;":String.fromCodePoint(o);break;case 38:t+="&amp;";break;case 39:t+=n?"&#039;":String.fromCodePoint(o);break;case 60:t+="&lt;";break;case 62:t+="&gt;";break;default:t+=String.fromCodePoint(o)}}return t},m.htmlUnescape=function(e){return e.split("&gt;").join(">").split("&lt;").join("<").split("&quot;").join('"').split("&#039;").join("'").split("&amp;").join("&")},m.startsWith=function(e,n){return e.length>=n.length&&0==e.lastIndexOf(n,0)},m.isSpace=function(e,n){var t=_.cca(e,n);return t>8&&t<14||32==t},m.ltrim=function(e){for(var n=e.length,t=0;t<n&&m.isSpace(e,t);)++t;return t>0?_.substr(e,t,n-t):e},m.rtrim=function(e){for(var n=e.length,t=0;t<n&&m.isSpace(e,n-t-1);)++t;return t>0?_.substr(e,0,n-t):e},m.trim=function(e){return m.ltrim(m.rtrim(e))};var p=function(){};p.__name__="Type",p.enumParameters=function(e){var n=i[e.__enum__].__constructs__[e._hx_index].__params__;if(null!=n){for(var t=[],r=0;r<n.length;){var l=n[r];++r,t.push(e[l])}return t}return[]};var d=i["cdb.ColumnType"]={__ename__:!0,__constructs__:null,TId:{_hx_name:"TId",_hx_index:0,__enum__:"cdb.ColumnType",toString:a},TString:{_hx_name:"TString",_hx_index:1,__enum__:"cdb.ColumnType",toString:a},TBool:{_hx_name:"TBool",_hx_index:2,__enum__:"cdb.ColumnType",toString:a},TInt:{_hx_name:"TInt",_hx_index:3,__enum__:"cdb.ColumnType",toString:a},TFloat:{_hx_name:"TFloat",_hx_index:4,__enum__:"cdb.ColumnType",toString:a},TEnum:(l=function(e){return{_hx_index:5,values:e,__enum__:"cdb.ColumnType",toString:a}},l._hx_name="TEnum",l.__params__=["values"],l),TRef:(l=function(e){return{_hx_index:6,sheet:e,__enum__:"cdb.ColumnType",toString:a}},l._hx_name="TRef",l.__params__=["sheet"],l),TImage:{_hx_name:"TImage",_hx_index:7,__enum__:"cdb.ColumnType",toString:a},TList:{_hx_name:"TList",_hx_index:8,__enum__:"cdb.ColumnType",toString:a},TCustom:(l=function(e){return{_hx_index:9,name:e,__enum__:"cdb.ColumnType",toString:a}},l._hx_name="TCustom",l.__params__=["name"],l),TFlags:(l=function(e){return{_hx_index:10,values:e,__enum__:"cdb.ColumnType",toString:a}},l._hx_name="TFlags",l.__params__=["values"],l),TColor:{_hx_name:"TColor",_hx_index:11,__enum__:"cdb.ColumnType",toString:a},TLayer:(l=function(e){return{_hx_index:12,type:e,__enum__:"cdb.ColumnType",toString:a}},l._hx_name="TLayer",l.__params__=["type"],l),TFile:{_hx_name:"TFile",_hx_index:13,__enum__:"cdb.ColumnType",toString:a},TTilePos:{_hx_name:"TTilePos",_hx_index:14,__enum__:"cdb.ColumnType",toString:a},TTileLayer:{_hx_name:"TTileLayer",_hx_index:15,__enum__:"cdb.ColumnType",toString:a},TDynamic:{_hx_name:"TDynamic",_hx_index:16,__enum__:"cdb.ColumnType",toString:a},TProperties:{_hx_name:"TProperties",_hx_index:17,__enum__:"cdb.ColumnType",toString:a},TGradient:{_hx_name:"TGradient",_hx_index:18,__enum__:"cdb.ColumnType",toString:a},TCurve:{_hx_name:"TCurve",_hx_index:19,__enum__:"cdb.ColumnType",toString:a},TGuid:{_hx_name:"TGuid",_hx_index:20,__enum__:"cdb.ColumnType",toString:a}};d.__constructs__=[d.TId,d.TString,d.TBool,d.TInt,d.TFloat,d.TEnum,d.TRef,d.TImage,d.TList,d.TCustom,d.TFlags,d.TColor,d.TLayer,d.TFile,d.TTilePos,d.TTileLayer,d.TDynamic,d.TProperties,d.TGradient,d.TCurve,d.TGuid];var v=i["cdb.LocField"]={__ename__:!0,__constructs__:null,LName:(l=function(e){return{_hx_index:0,c:e,__enum__:"cdb.LocField",toString:a}},l._hx_name="LName",l.__params__=["c"],l),LSub:(l=function(e,n,t){return{_hx_index:1,c:e,s:n,e:t,__enum__:"cdb.LocField",toString:a}},l._hx_name="LSub",l.__params__=["c","s","e"],l),LSingle:(l=function(e,n){return{_hx_index:2,c:e,e:n,__enum__:"cdb.LocField",toString:a}},l._hx_name="LSingle",l.__params__=["c","e"],l)};v.__constructs__=[v.LName,v.LSub,v.LSingle];var g=function(e){this.e=e};g.__name__="cdb.Ref",g.prototype={__class__:g};var y=function(e){this.root=e,this.dataSheets=new L};y.__name__="cdb.Lang",y.toLangXml=function(e){var n=new cdb_LangXml;if(e.nodeType!=Xml.Element)throw I.thrown("Bad node type, expected Element but found "+(null==e.nodeType?"null":XmlType.toString(e.nodeType)));var t=e.nodeName;n.nodeName=y.NODES.h[t],null==n.nodeName&&(n.nodeName=t,y.NODES.h[t]=t);var r=!1;if(e.nodeType!=Xml.Document&&e.nodeType!=Xml.Element)throw I.thrown("Bad node type, expected Element or Document but found "+(null==e.nodeType?"null":XmlType.toString(e.nodeType)));for(var l=0,a=e.children;l<a.length;){var i;if(1==(_=a[l++]).nodeType){var o=y.r_spaces;if(_.nodeType==Xml.Document||_.nodeType==Xml.Element)throw I.thrown("Bad node type, unexpected "+(null==_.nodeType?"null":XmlType.toString(_.nodeType)));i=!o.match(_.nodeValue)}else i=!1;if(i){r=!0;break}}if(r){if(e.nodeType!=Xml.Document&&e.nodeType!=Xml.Element)throw I.thrown("Invalid nodeType "+(null==e.nodeType?"null":XmlType.toString(e.nodeType)));var s=haxe_xml_Access.get_innerHTML(e),u=new RegExp("<br/>","gi".split("u").join(""));s=s.replace(u,"\n"),n._html=m.htmlUnescape(s)}else{n._elements=[];for(var _=e.elements();_.hasNext();){var h=_.next();n._elements.push(y.toLangXml(h))}}return n},y.getObjParent=function(e,n){return null},y.prototype={onMissing:function(e){console.log("cdb/Lang.hx:49:",e)},getSub:function(e,n){return this.getSheet(e.name+"@"+n.name)},getSheet:function(e){for(var n=0,t=this.root.sheets;n<t.length;){var r=t[n];if(++n,r.name==e)return r}return null},makeLocField:function(e,n){switch(e.type._hx_index){case 1:return"localizable"==e.kind?v.LName(e):null;case 8:case 17:var t=this.getSub(n,e),r=this.makeSheetFields(t);return 0==r.length?null:v.LSub(e,t,r);default:return null}},makeSheetFields:function(e){for(var n=[],t=0,r=e.columns;t<r.length;){var l=r[t];++t;var a=this.makeLocField(l,e);if(null!=a)if(1==a._hx_index){a.s;var i=a.c,o=a.e;if(i.type==d.TProperties)for(var s=0;s<o.length;){var u=o[s];++s,n.push(v.LSingle(i,u))}else n.push(a)}else n.push(a)}return n},apply:function(e,n){var t=Xml.parse(e).firstElement(),r=null==n?null:Xml.parse(n).firstElement(),l=Object.create(null);y.NODES=new L;for(var a=t.elements();a.hasNext();){l[(i=a.next()).get("name")]=new g(y.toLangXml(i))}if(null!=r)for(a=r.elements();a.hasNext();){var i;null!=(_=l[(i=a.next()).get("name")])&&(_.ref=y.toLangXml(i))}y.NODES=null;for(var o=new L,s=0,u=this.root.sheets;s<u.length;){var _=u[s];if(++s,!_.props.hide){t=l[_.name];if(null==_.props.dataFiles)if(null!=t){var h=[_.name],f=[];if(this.applySheet(h,_,this.makeSheetFields(_),_.lines,t,f),Object.prototype.hasOwnProperty.call(o.h,_.name))throw I.thrown("assert");o.h[_.name]=f}else _.lines.length>0&&this.makeSheetFields(_).length>0&&this.onMissing("Missing sheet "+_.name);else{var c=this.makeSheetFields(_);if(c.length>0){for(var m=null,p=0,v=_.columns;p<v.length;){var x=v[p];if(++p,x.type==d.TId){m=x.name;break}}if(null==m)continue;if(null==t){this.onMissing("Missing sheet "+_.name);continue}var T=this.dataSheets,b=_.name,S={sheet:_,idField:m,fields:c,refs:this.makeIdMap(t)};T.h[b]=S}}}}return o},delete:function(e){for(var n=0,t=this.root.sheets;n<t.length;){var r=t[n];++n;var l=e.h[r.name];null!=l&&this.deleteSheet(r,this.makeSheetFields(r),l,r.lines)}},deleteSheet:function(e,n,t,r){var l=this.getSheetHelpers(e);if(null==l.id)for(var a=0,i=r.length;a<i;){var o=a++;null!=t[o]&&null!=r[o]&&this.deleteObj(n,t[o],r[o])}else{var s=Object.create(null);for(a=0;a<t.length;){var u=t[a];++a,s[f.field(u,l.id)]=u}for(a=0;a<r.length;){var _=r[a];++a;var h=f.field(_,l.id);null!=h&&Object.prototype.hasOwnProperty.call(s,h)&&this.deleteObj(n,s[h],_)}}},deleteObj:function(e,n,t){for(var r=0;r<e.length;){var l=e[r];switch(++r,l._hx_index){case 0:var a=l.c;Object.prototype.hasOwnProperty.call(n,a.name)&&(t[a.name]="");break;case 1:var i=l.c,o=l.s,s=l.e,u=f.field(t,i.name),_=f.field(n,i.name);if(null==u||null==_)continue;this.deleteSheet(o,s,_,u);break;case 2:var h=l.c,c=l.e,m=f.field(t,h.name),p=f.field(n,h.name);if(null==m||null==p)continue;this.deleteObj([c],p,m)}}},applySheet:function(e,n,t,r,l,a){var i=this.getSheetHelpers(n);if(null==i.id){var o=[];if(null!=l){for(var s=0,u=l.e._elements;s<u.length;){var h=u[s];++s;for(var p=new L,d=0,v=h._elements;d<v.length;){var y=v[d];++d;var x=y.nodeName,T=new g(y);p.h[x]=T}var b=h.nodeName;m.startsWith(b,"line")&&(b=_.substr(b,4,null)),o[c.parseInt(b)]=p}if(null!=l.ref)for(s=0,u=l.ref._elements;s<u.length;){h=u[s];++s;b=h.nodeName;if(m.startsWith(b,"line")&&(b=_.substr(b,4,null)),null!=(p=o[c.parseInt(b)]))for(d=0,v=h._elements;d<v.length;){y=v[d];++d;var S=p.h[y.nodeName];null!=S&&(S.ref=y)}}}for(s=0,u=r.length;s<u;){var w=s++,I={},O=r[w];for(d=0;d<t.length;){var C=t[d];++d,e.push("["+w+"]"),this.applyRec(e,C,O,o[w],I),e.pop()}if(f.fields(I).length>0){v=0;for(var j=i.helpers;v<j.length;){var k=j[v];++v;var E=f.field(O,k.name);null!=E&&(I[k.name]=E)}a[w]=I}}}else{var F=this.makeIdMap(l);for(s=0;s<r.length;){O=r[s];++s;I={};var $=f.field(O,i.id);null==$&&($="null"),e.push($);for(u=0;u<t.length;){C=t[u];++u,this.applyRec(e,C,O,F.h[$],I)}e.pop(),f.fields(I).length>0&&(I[i.id]=$,a.push(I))}}},makeIdMap:function(e){var n=new L;if(null==e)return n;for(var t=0,r=e.e._elements;t<r.length;){var l=r[t];++t;for(var a=new L,i=0,o=l._elements;i<o.length;){var s=o[i];++i;var u=s.nodeName,_=new g(s);a.h[u]=_}n.h[l.nodeName]=a}if(null!=e.ref)for(t=0,r=e.ref._elements;t<r.length;){l=r[t];if(++t,null!=(a=n.h[l.nodeName]))for(i=0,o=l._elements;i<o.length;){s=o[i];++i;var h=a.h[s.nodeName];null!=h&&(h.ref=s)}}return n},applyRec:function(e,n,t,r,l){var a=this.skipMissing;Object.prototype.hasOwnProperty.call(t,y.IGNORE_EXPORT_FIELD)&&(this.skipMissing=!0),this._applyRec(e,n,t,r,l),this.skipMissing=a},_applyRec:function(e,n,t,r,l){switch(n._hx_index){case 0:var a=n.c;if(null!=(d=null==r?null:r.h[a.name])){if(null==(s=d.e)._html)throw I.thrown("assert");var i,o=s._html;if(null==d.ref)i=null;else{var s;if(null==(s=d.ref)._html)throw I.thrown("assert");i=s._html}var u=f.field(t,a.name);null==i||null!=u&&m.trim(i)==m.trim(u)?t[a.name]=o:(e.push(a.name),this.onMissing("Ignored since has changed "+e.join(".")),e.pop())}else{null!=(d=f.field(t,a.name))&&""!=d&&(this.skipMissing||(e.push(a.name),l[a.name]=d,this.onMissing("Missing "+e.join(".")),e.pop()),this.missingSetLocKey&&(e.push(a.name),t[a.name]="#"+e.join("."),e.pop()))}break;case 1:a=n.c;var h=n.s,c=n.e;if(null==(d=f.field(t,a.name)))return;e.push(a.name);var p=[];this.applySheet(e,h,c,d,null==r?null:r.h[a.name],p),p.length>0&&(l[a.name]=p),e.pop();break;case 2:a=n.c;var d,v=n.e;if(null==(d=f.field(t,a.name)))return;e.push(a.name);var g;p={};if(null==r)g=null;else{for(var y=new L,x=r.h,T=Object.keys(x),b=T.length,S=0;S<b;){var w=T[S++];m.startsWith(w,a.name+".")&&(y.h[_.substr(w,a.name.length+1,null)]=r.h[w])}g=y}this.applyRec(e,v,d,g,p),e.pop(),f.fields(p).length>0&&(l[a.name]=p)}},buildXML:function(e){var n="";n+="<cdb>\n";for(var t=0,r=this.root.sheets;t<r.length;){var l=r[t];if(++t,!l.props.hide){var a=this.makeSheetFields(l);if(0!=a.length){var i=this.getLines(l,e);0!=i.length&&(n+=c.string('\t<sheet name="'+l.name+'">\n'),n+=c.string(this.buildSheetXml(l,"\t\t",i,l.linesData,a,e)),n+="\t</sheet>\n")}}}return n+="</cdb>\n"},getLines:function(e,n){if(null!=n){var t=n.h[e.name];if(null==t)throw I.thrown("Missing diff for "+e.name);return t}return e.lines},getLocText:function(e,n,t,r){switch(t._hx_index){case 0:var l=t.c;return null!=(o=f.field(n,l.name))&&(o=m.htmlEscape(o).split("\n").join("<br/>").split("\r").join("")),{name:l.name,value:o};case 1:l=t.c;var a=t.s,i=t.e,o=f.field(n,l.name),s=this.buildSheetXml(a,e+"\t\t",null==o?[]:o,null,i,r);return{name:l.name,value:s};case 2:l=t.c;var u=t.e;o=this.getLocText(e,f.field(n,l.name),u,r);return{name:l.name+"."+o.name,value:o.value}}},getSheetHelpers:function(e){for(var n=null,t=[],r=0,l=e.columns;r<l.length;){var a=l[r];++r;var i=a.type;switch(i._hx_index){case 0:null==n&&(n=a);break;case 1:"localizable"!=a.kind&&t.push({label:a.name,name:a.name,map:null});break;case 6:var o=i.sheet,s=null;if(null!=(e=this.getSheet(o)).props.displayColumn){for(var u=null,_=0,h=e.columns;_<h.length;){var c=h[_];if(++_,c.type==d.TId){u=c;break}}if(null!=u){s=new L;for(var m=0,p=e.lines;m<p.length;){var v=p[m];++m;var g=f.field(v,u.name),y=f.field(v,e.props.displayColumn);null!=g&&""!=g&&null!=y&&""!=y&&(s.h[g]=y)}}}t.push({label:a.name,name:a.name,map:s})}}return null!=n&&(t=[]),{id:null==n?null:n.name,idOpt:null!=n&&n.opt,helpers:t}},resolveField:function(e,n,t){for(var r=e,l=0,a=n.split(".");l<a.length;){var i=a[l];if(++l,"$root"==i){if(null==t)return null;var o=y.getObjParent(e,t);if(null==o)return null;r=o}else{if(!Object.prototype.hasOwnProperty.call(r,i))return null;r=f.field(r,i)}}return null==r?null:c.string(r)},buildSheetXml:function(e,n,t,r,l,a){var i=this.getSheetHelpers(e),o=null!=y.LANG_CONFIG?y.LANG_CONFIG[e.name]:null;if(null!=o)for(var s=o,u=f.fields(o),_=0;_<u.length;){var h=u[_++],p=h,d=S=s[h];i.helpers.push({label:p,name:d,map:null})}for(var v="",g=0,x=this.currentLineData,T=0,b=t;T<b.length;){var S=b[T],w=T++,I=S;if(!Object.prototype.hasOwnProperty.call(I,y.IGNORE_EXPORT_FIELD)){var O;if(null!=r&&(this.currentLineData=r[w]),null==i.id)O="line"+g++;else{if(""==(O=f.field(I,i.id)))continue;if(null==O){if(!i.idOpt)continue;O="null"}}for(var C=[],L=0;L<l.length;){var j=l[L];++L;var k=this.getLocText(n,I,j,a);C.push({f:j,value:k.value,name:k.name})}for(var E=C,F=!1,$=0;$<E.length;){var P=E[$];if(++$,null!=P.value&&""!=P.value){F=!0;break}}if(F){v+=c.string(n+"<"+O);for(var N=0,M=i.helpers;N<M.length;){var A=M[N];++N;var R=this.resolveField(I,A.name,null!=e.linesData?e.linesData[w]:null);if(null!=R){if(null!=A.map)null!=(d=A.map.h[R])&&(R=d);var D=new RegExp("\\$","g".split("u").join("")),X=A.label.replace(D,"_");v+=c.string(" "+X+'="'+m.htmlEscape(R,!0)+'"')}}v+=">\n";for(var B=0;B<E.length;){var G=E[B];if(++B,null!=G.value&&""!=G.value){var H,V=G.f;if(0==V._hx_index){V.c;H=!0}else H=!1;H||G.value.indexOf("<")<0?v+=c.string(n+"\t<"+G.name+">"+G.value+"</"+G.name+">\n"):(v+=c.string(n+"\t<"+G.name+">\n"),v+=c.string(n+"\t\t"+m.trim(G.value)+"\n"),v+=c.string(n+"\t</"+G.name+">\n"))}}v+=c.string(n+"</"+O+">\n")}}}return this.currentLineData=x,v},__class__:y};var x=function(){};x.__name__="cdb.Module",x.getSheetLines=function(e,n){if(null!=n.props.dataFiles)return[];if(!n.props.hide)return n.lines;for(var t=n.name.split("@"),r=t.pop(),l=t.join("@"),a=null,i=0;i<e.length;){var o=e[i];if(++i,o.name==l){a=o;break}}if(null==a)return n.lines;for(var s=[],u=(i=0,x.getSheetLines(e,a));i<u.length;){var _=u[i];++i;var h=f.field(_,r);if(null!=h){h instanceof Array||(h=[h]);for(var c=0,m=h instanceof Array?h:null;c<m.length;){var p=m[c];++c,s.push(p)}}}return s},x.build=function(e,n){throw I.thrown("This can only be called in a macro")};var T=function(){};T.__name__="cdb.Parser",T.saveType=function(e){switch(e._hx_index){case 5:var n=e.values;return e._hx_index+":"+n.join(",");case 6:e.sheet;return e._hx_index+":"+c.string(p.enumParameters(e)[0]);case 9:e.name;return e._hx_index+":"+c.string(p.enumParameters(e)[0]);case 10:n=e.values;return e._hx_index+":"+n.join(",");case 12:e.type;return e._hx_index+":"+c.string(p.enumParameters(e)[0]);default:return null==e._hx_index?"null":""+e._hx_index}},T.getType=function(e){var n=c.parseInt(e);if(null==n)throw I.thrown("Unknown type "+e);switch(n){case 0:return d.TId;case 1:return d.TString;case 2:return d.TBool;case 3:return d.TInt;case 4:return d.TFloat;case 5:return d.TEnum(_.substr(e,e.indexOf(":")+1,null).split(","));case 6:return d.TRef(_.substr(e,e.indexOf(":")+1,null));case 7:return d.TImage;case 8:return d.TList;case 9:return d.TCustom(_.substr(e,e.indexOf(":")+1,null));case 10:return d.TFlags(_.substr(e,e.indexOf(":")+1,null).split(","));case 11:return d.TColor;case 12:return d.TLayer(_.substr(e,e.indexOf(":")+1,null));case 13:return d.TFile;case 14:return d.TTilePos;case 15:return d.TTileLayer;case 16:return d.TDynamic;case 17:return d.TProperties;case 18:return d.TGradient;case 19:return d.TCurve;case 20:return d.TGuid;default:throw I.thrown("Unknown type "+e)}},T.parse=function(e,n){if(null==e)throw I.thrown("CDB content is null");for(var t=JSON.parse(e),r=0,l=t.sheets;r<l.length;){var a=l[r];++r;for(var i=0,o=a.columns;i<o.length;){var s=o[i];++i,s.type=T.getType(s.typeStr),s.typeStr=null}}for(r=0,l=t.customTypes;r<l.length;){var u=l[r];++r;for(i=0,o=u.cases;i<o.length;){s=o[i];++i;for(var _=0,h=s.args;_<h.length;){var c=h[_];++_,c.type=T.getType(c.typeStr),c.typeStr=null}}}for(r=0,l=t.sheets;r<l.length;){a=l[r];if(++r,n||a.props.hasGroup){if(null==a.separators){var m=f.field(a,"separatorIds");for(i=[],o=0;o<m.length;){var p=m[o];++o,"number"==typeof p&&(0|p)===p?i.push({index:p}):i.push({id:p})}a.separators=i,f.deleteField(a,"separatorIds")}var v=null;for(_=0,h=a.separators.length;_<h;){var g=_++,y=a.separators[g];if("number"==typeof y&&(0|y)===y)a.separators[g]={index:y};else if(null!=y.id){if(null==v){for(var x=null,b=0,S=a.columns;b<S.length;){s=S[b];if(++b,s.type==d.TId){x=s.name;break}}v=new L;for(var w=0,O=a.lines.length;w<O;){var C=w++,j=a.lines[C],k=f.field(j,x);null!=k&&(v.h[k]=C)}}y.index=v.h[y.id],f.deleteField(y,"id")}}var E=f.field(a.props,"separatorTitles");if(null!=E){f.deleteField(a.props,"separatorTitles");for(var F=0,$=E.length;F<$;){var P=F++;null!=E[P]&&(a.separators[P].title=E[P])}}}}return t},T.save=function(e){for(var n=[],t=[],r=0,l=e.sheets;r<l.length;){var a=l[r];++r;for(var i=null,o=0,s=a.columns;o<s.length;){var u=s[o];++o,u.type==d.TId&&null==i&&(i=u.name),n.push(u.type),null==u.typeStr&&(u.typeStr=T.saveType(u.type)),f.deleteField(u,"type")}for(var _=[],h=0,c=a.separators;h<c.length;){var m=c[h];++h,null==m.id&&null==m.index||_.push(m)}a.separators=_;var p=null;if(null!=i&&a.separators.length>0){for(var v=!0,g=Object.create(null),y=0,x=a.lines;y<x.length;){var b=x[y];++y;var S=f.field(b,i);if(null!=S){if(g[S]){v=!1;break}g[S]=!0}}if(v){p=a.separators,a.separators=[];for(var w=0;w<p.length;){var I=p[w];++w;var O=a.lines[I.index],C=null!=O?f.field(O,i):null,L=I;null!=C&&(L=f.copy(L),f.deleteField(L,"index"),L.id=C),null==L.id&&null==L.index||a.separators.push(L)}}}t.push(p)}for(r=0,l=e.customTypes;r<l.length;){var j=l[r];++r;for(o=0,s=j.cases;o<s.length;){u=s[o];++o;for(_=0,h=u.args;_<h.length;){var k=h[_];++_,n.push(k.type),null==k.typeStr&&(k.typeStr=T.saveType(k.type)),f.deleteField(k,"type")}}}var E=JSON.stringify(e,null,"\t");for(r=0,l=e.sheets;r<l.length;){a=l[r];++r;for(o=0,s=a.columns;o<s.length;){u=s[o];++o,u.type=n.shift()}null!=(p=t.shift())&&(a.separators=p)}for(r=0,l=e.customTypes;r<l.length;){j=l[r];++r;for(o=0,s=j.cases;o<s.length;){u=s[o];++o;for(_=0,h=u.args;_<h.length;){k=h[_];++_,k.type=n.shift()}}}return E};var b={_new:function(e){return e},toInt:function(e){if(null==e)return new haxe__$Int64__$_$_$Int64(0,0);for(var n=0,t=new haxe__$Int64__$_$_$Int64(0,0),r=0;r<13;){var l=r++;if(4!=l&&9!=l){var a=b.CVALUES[_.cca(e,l)];if(a<0)throw I.thrown("assert");var i=a>>31,o=a,s=60-6*n++,u=0==(s&=63)?new haxe__$Int64__$_$_$Int64(i,o):s<32?new haxe__$Int64__$_$_$Int64(i<<s|o>>>32-s,o<<s):new haxe__$Int64__$_$_$Int64(o<<s-32,0);t=new haxe__$Int64__$_$_$Int64(t.high|u.high,t.low|u.low)}}return t},ofInt:function(e){if(0==e.high&&0==e.low)return b._new(null);for(var n="",t=e,r=0;r<11;){var l=r++;4!=l&&8!=l||(n+="-");var a=60-6*l;a&=63,n+=b.CHARS.charAt(63&(0==a?new haxe__$Int64__$_$_$Int64(t.high,t.low):a<32?new haxe__$Int64__$_$_$Int64(t.high>>a,t.high<<32-a|t.low>>>a):new haxe__$Int64__$_$_$Int64(t.high>>31,t.high>>a-32)).low)}return b._new(n)}},S=function(e,n){if(this.name=n,this.initSheet(e),null==this.sheet)throw I.thrown("'"+n+"' not found in CDB data")};S.__name__="cdb.Index",S.initLines=function(e){var n=e.lines;if(e.props.hasIndex)for(var t=0,r=n.length;t<r;){n[i=t++].index=i}if(e.props.hasGroup){for(var l=-1,a=0;;){if(null==(o=e.separators[a])||0!=o.index)break;++a,null!=o.title&&++l}l<0&&++l;for(t=0,r=n.length;t<r;){for(var i=t++;;){var o;if(null==(o=e.separators[a])||o.index!=i)break;null!=o.title&&++l,++a}n[i].group=l}}},S.prototype={initSheet:function(e){for(var n=0,t=e.sheets;n<t.length;){var r=t[n];if(++n,r.name==this.name){this.all=r.lines,this.sheet=r,S.initLines(r);break}}},__class__:S};var w=function(e,n){S.call(this,e,n)};w.__name__="cdb.IndexId",w.__super__=S,w.prototype=o(S.prototype,{initSheet:function(e){S.prototype.initSheet.call(this,e),this.byId=new L,this.byIndex=[];for(var n=0,t=this.sheet.columns;n<t.length;){var r=t[n];if(++n,0==r.type._hx_index){for(var l=r.name,a=0,i=this.sheet.lines;a<i.length;){var o=i[a];++a;var s=f.field(o,l);null!=s&&""!=s&&(this.byId.h[s]=o,this.byIndex.push(o))}break}}},reload:function(e){var n=this.byId;this.byIndex;this.initSheet(e);for(var t=this.byId.h,r=Object.keys(t),l=r.length,a=0;a<l;){var i=r[a++],o=n.h[i];if(null!=o){for(var s=this.byId.h[i],u=f.fields(o),h=0,c=f.fields(s);h<c.length;){var m=c[h];++h,o[m]=f.field(s,m),_.remove(u,m)}for(var p=0;p<u.length;){var d=u[p];++p,f.deleteField(o,d)}var v=this.byIndex.indexOf(s);v>=0&&(this.byIndex[v]=o),this.sheet.lines[this.sheet.lines.indexOf(s)]=o,this.byId.h[i]=o}}},get:function(e){return this.byId.h[e]},resolve:function(e,n,t){if(null==e)return null;var r=this.byId.h[e];if(null==r&&t){e=e.toLowerCase();for(var l=1e3,a=$keyValueIterator(C)(this.byId);a.hasNext();){var i=a.next(),o=i.key,s=i.value;m.startsWith(o.toLowerCase(),e)&&o.length<l&&(r=s,l=o.length)}}if(null!=r||n)return r;throw I.thrown("Missing "+this.name+"."+e)},__class__:w});var I=function(e,n,t){Error.call(this,e),this.message=e,this.__previousException=n,this.__nativeException=null!=t?t:this};I.__name__="haxe.Exception",I.thrown=function(e){return e instanceof I?e.get_native():e instanceof Error?e:new O(e)},I.__super__=Error,I.prototype=o(Error.prototype,{get_native:function(){return this.__nativeException},__class__:I});var O=function(e,n,t){I.call(this,String(e),n,t),this.value=e};O.__name__="haxe.ValueException",O.__super__=I,O.prototype=o(I.prototype,{__class__:O});var C={keyValueIterator:function(e){return e.keyValueIterator()}},L=function(){this.h=Object.create(null)};L.__name__="haxe.ds.StringMap",L.prototype={keyValueIterator:function(){return new haxe_ds__$StringMap_StringMapKeyValueIterator(this.h)},__class__:L};var j=i["haxe.io.Error"]={__ename__:!0,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:a},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:a},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:a},Custom:(l=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:a}},l._hx_name="Custom",l.__params__=["e"],l)};j.__constructs__=[j.Blocked,j.Overflow,j.OutsideBounds,j.Custom];var k=function(){};k.__name__="js.Boot",k.__string_rec=function(e,n){if(null==e)return"null";if(n.length>=5)return"<...>";var t=typeof e;switch("function"==t&&(e.__name__||e.__ename__)&&(t="object"),t){case"function":return"<function>";case"object":if(e.__enum__){var r=i[e.__enum__].__constructs__[e._hx_index],l=r._hx_name;return r.__params__?(n+="\t",l+"("+function(t){for(var l=[],a=0,i=r.__params__;a<i.length;){var o=i[a];a+=1,l.push(k.__string_rec(e[o],n))}return l}().join(",")+")"):l}if(e instanceof Array){var a="[";n+="\t";for(var o=0,s=e.length;o<s;){var u=o++;a+=(u>0?",":"")+k.__string_rec(e[u],n)}return a+="]"}var _;try{_=e.toString}catch(o){return"???"}if(null!=_&&_!=Object.toString&&"function"==typeof _){var h=e.toString();if("[object Object]"!=h)return h}a="{\n";n+="\t";var f=null!=e.hasOwnProperty,c=null;for(c in e)f&&!e.hasOwnProperty(c)||"prototype"!=c&&"__class__"!=c&&"__super__"!=c&&"__interfaces__"!=c&&"__properties__"!=c&&(2!=a.length&&(a+=", \n"),a+=n+c+" : "+k.__string_rec(e[c],n));return a+="\n"+(n=n.substring(1))+"}";case"string":return e;default:return String(e)}},null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),Object.defineProperty(String.prototype,"__class__",{value:String,enumerable:!1,writable:!0}),String.__name__="String",Array.__name__="Array",k.__toStr={}.toString,null==ArrayBuffer.prototype.slice&&(ArrayBuffer.prototype.slice=js_lib__$ArrayBuffer_ArrayBufferCompat.sliceImpl),y.IGNORE_EXPORT_FIELD="__ignoreLoc__",y.r_spaces=new u("^[ \t\r\n]+$",""),b.CHARS="#&0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",b.CVALUES=function(e){for(var n=[],t=0;t<128;){var r=t++;n.push(b.CHARS.indexOf(String.fromCodePoint(r)))}return n}(),h.main()}(),t}},e("default",l.exports),l.exports.run}),{})}}}));

System.register("chunks:///_virtual/main.mjs_cjs=&original=.js",["./main.js","./cjs-loader.mjs"],(function(e,t){var a,r;return{setters:[function(t){a=t.__cjsMetaURL;var r={};r.__cjsMetaURL=t.__cjsMetaURL,r.default=t.default,e(r)},function(e){r=e.default}],execute:function(){a||r.throwInvalidWrapper("./main.js",t.meta.url),r.require(a)}}}));

System.register("chunks:///_virtual/Piece.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9db3e3DPctO556tyYescimo","Piece",void 0);e("Piece",(function(e,t){this.id=void 0,this.type=void 0,this.id=e,this.type=t}));t._RF.pop()}}}));

System.register("chunks:///_virtual/PieceFactory.ts",["cc","./Piece.ts"],(function(t){var c,e;return{setters:[function(t){c=t.cclegacy},function(t){e=t.Piece}],execute:function(){c._RF.push({},"dc335AO7whMrbl3aAfAlzBQ","PieceFactory",void 0);t("PieceFactory",function(){function t(t){this.idFactory=void 0,this.idFactory=t}return t.prototype.create=function(t){return new e(this.idFactory.newId(),t)},t}());c._RF.pop()}}}));

System.register("chunks:///_virtual/Random.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"bbbca9IDXpFV4zR3ZU1BPeA","Random",void 0);t("Random",function(){function t(t){this.A=1664525,this.C=1013904223,this.M=4294967296,this.seed=void 0,this.seed=t}var e=t.prototype;return e.next=function(){return this.seed=(this.A*this.seed+this.C)%this.M,this.seed/this.M},e.nextRange=function(t,e){return this.next()*(e-t)+t},e.nextRangeInt=function(t,e){return Math.floor(this.next()*(e-t))+t},t}()),t("WeigthedRandomizer",function(){function t(t,i){this.items=void 0,this.random=void 0,this.cumulativeWeights=void 0;for(var n,s=[],h=[],o=0,r=e(i);!(n=r()).done;){var u=n.value,a=u[0];o+=u[1],s.push(a),h.push(o)}this.random=t,this.items=s,this.cumulativeWeights=h}return t.prototype.next=function(){for(var t=this.cumulativeWeights[this.cumulativeWeights.length-1],e=this.random.nextRangeInt(0,t),i=0;i<this.cumulativeWeights.length;i++)if(e<this.cumulativeWeights[i])return this.items[i];return this.items[this.items.length-1]},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/RandomService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Random.ts"],(function(e){var o,r,t,n,i;return{setters:[function(e){o=e.regeneratorRuntime,r=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy},function(e){n=e.Random,i=e.WeigthedRandomizer}],execute:function(){t._RF.push({},"1d09dsV9fROTYtpceHQKG0H","RandomService",void 0);e("RandomService",function(){function e(e){this.colorGroupRandomizer=void 0,this.random=void 0,this.random=new n(e.randomSeed);var o=this.toColorGroupProbabilities(e.blast.colorGroupSetup);this.colorGroupRandomizer=new i(this.random,o)}var t=e.prototype;return t.next=function(){return this.colorGroupRandomizer.next()},t.toColorGroupProbabilities=o().mark((function e(t){var n,i,a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r(t);case 1:if((i=n()).done){e.next=8;break}return a=i.value,c=a.group,e.next=6,[c,a.probability];case 6:e.next=1;break;case 8:case"end":return e.stop()}}),e)})),e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ReadyState.ts",["cc","./DefeatState.ts","./TilesFallingState.ts","./VictoryState.ts","./FloodFillGroupFinder.ts"],(function(t){var e,n,i,s,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.DefeatState},function(t){i=t.TilesFallingState},function(t){s=t.VictoryState},function(t){c=t.FloodFillGroupFinder}],execute:function(){e._RF.push({},"9e3c8E2k9VNhJE6paBX6NS1","ReadyState",void 0),t("ReadyState",function(){function t(t,e){void 0===e&&(e=new c),this.ctx=t,this.clusters=e}var e=t.prototype;return e.enter=function(){this.updateStats(),this.checkGameCompletionCondition()},e.handleTap=function(e){var n=this,s=this.clusters.find(this.ctx.grid,e);s.length<2||(s.forEach((function(t){return t.piece=null})),this.ctx.progress.addScore(s.length*t.PTS_PER_TILE),this.ctx.progress.consumeTurn(),this.ctx.view.clear(s).then((function(){return n.ctx.setState(new i(n.ctx))})),this.updateStats())},e.updateStats=function(){var t=this.ctx.view,e=this.ctx.progress;t.updateTurns&&t.updateTurns(e.movesLeft),t.updateScore&&t.updateScore(e.score,e.targetScore)},e.checkGameCompletionCondition=function(){this.ctx.progress.hasWon?this.ctx.setState(new s(this.ctx)):this.ctx.progress.outOfMoves&&this.ctx.setState(new n(this.ctx))},t}()).PTS_PER_TILE=10,e._RF.pop()}}}));

System.register("chunks:///_virtual/RefillService.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"3f733Zjr6xJ9YD02S4QPL5R","RefillService",void 0);e("RefillService",function(){function e(){}return e.prototype.refill=function(e,i,t){for(var r=[],c=[],n=0;n<e.height;n++)for(var f=0;f<e.width;f++){var o=e.getCell(f,n);o.piece||(o.piece={id:t.newId(),type:i.next()},c[f]||(c[f]=0),r.push({id:o.piece.id,fromX:f,fromY:c[f]+e.height,toY:n}),c[f]++)}return r},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/StatsView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,a,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Label,u=e.Component}],execute:function(){var l,c,p,f,g,d,h,m,C,E;o._RF.push({},"9f3d7F+0IlMeIm9B16v8Zae","StatsView",void 0);var v=a.ccclass,y=a.property;a.requireComponent,e("StatsView",(l=v("StatsView"),c=y(s),p=y(s),f=y(s),l(((E=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"turnsCounter",h,i(t)),n(t,"scoreCounter",m,i(t)),n(t,"gameEnd",C,i(t)),t}r(t,e);var o=t.prototype;return o.showDefeat=function(){return this.gameEnd.node.active=!0,this.gameEnd.string=t.DEFEAT_LOCALE,Promise.resolve()},o.showVictory=function(){return this.gameEnd.node.active=!0,this.gameEnd.string=t.VICTORY_LOCALE,Promise.resolve()},o.updateScore=function(e,t){return this.scoreCounter.string=e+" / "+t},o.updateTurns=function(e){this.turnsCounter.string=""+e},t}(u)).VICTORY_LOCALE="!!!",E.DEFEAT_LOCALE=" :(",h=t((d=E).prototype,"turnsCounter",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(d.prototype,"scoreCounter",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(d.prototype,"gameEnd",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=d))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/TilesFallingState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ReadyState.ts"],(function(t){var e,i,n,r,c;return{setters:[function(t){e=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){n=t.cclegacy,r=t.log},function(t){c=t.ReadyState}],execute:function(){n._RF.push({},"435157WDn9Fs6Lu8ExcKXxq","TilesFallingState",void 0);t("TilesFallingState",function(){function t(t){this.ctx=t}var n=t.prototype;return n.enter=function(){var t=e(i().mark((function t(){var e,n,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.ctx.gravity.applyGravity(this.ctx.grid),n=this.ctx.view.dropGravity(e),s=this.ctx.refill.refill(this.ctx.grid,this.ctx.rng,this.ctx.idFactory),r(e),r(s),t.next=7,this.ctx.view.refill(s,this.ctx.grid.cells);case 7:return t.next=9,n;case 9:this.ctx.setState(new c(this.ctx));case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.handleTap=function(t){},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Typings.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseCdbSheet.ts"],(function(e){var t,n,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){s=e.BaseCdbSheet}],execute:function(){n._RF.push({},"71da35qbdhBVLmhDCJqabXw","Typings",void 0);var r=e("GameLevelsSheet",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n}(s)),u=e("BlastGroupsSheet",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n}(s));e("SheetConstructors",{gameLevels:r,blastGroups:u});n._RF.pop()}}}));

System.register("chunks:///_virtual/VictoryState.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r;return{setters:[function(t){n=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"0a692qH0a1EMpFxHpmF7/RO","VictoryState",void 0);t("VictoryState",function(){function t(t){this.ctx=t}var r=t.prototype;return r.enter=function(){var t=n(e().mark((function t(){var n,r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null==(n=(r=this.ctx.view).showVictory)?void 0:n.call(r);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),r.handleTap=function(t){},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/ViewFacade.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"bea08ilnxVDv4UohADPuFfZ","ViewFacade",void 0);t("ViewFacade",function(){function t(t,e){this.boardView=t,this.hud=e}var e=t.prototype;return e.showDefeat=function(){return this.hud.showDefeat()},e.showVictory=function(){return this.hud.showVictory()},e.updateTurns=function(t){return this.hud.updateTurns(t),Promise.resolve()},e.updateScore=function(t,e){return this.hud.updateScore(t,e),Promise.resolve()},e.initGrid=function(t,e,r){return this.boardView.initGrid(t,e,r)},e.clear=function(t){return this.boardView.clear(t)},e.dropGravity=function(t){return this.boardView.dropGravity(t)},e.refill=function(t,e){return this.boardView.refill(t,e)},t}());e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});